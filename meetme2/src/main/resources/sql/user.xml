<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Users">
	<select resultType="User" parameterType="String" id="idcheck">
		select * from mm_user where user_id = #{user_id}
	</select>
	
	<insert parameterType="User" id="insert">
		insert into mm_user 
		values((select nvl(max(user_num),0)+1 from mm_user), #{user_id},#{user_pass},#{user_name},#{user_email},#{user_gender},#{user_age},#{user_city}, #{user_save}, #{user_original}, 0)
	</insert>
	
	<select id="selectNum" parameterType="String" resultType="User">
		select * from mm_user
		where user_id = #{user_id}
	</select>
	
	<insert id="insert_inter" parameterType="User_interests">
	    INSERT INTO
	        mm_user_interests
	    VALUES(#{user_num}, #{category_num})
	</insert>
	
	
	<insert id="createAuthKey">
		insert into userAuth values(#{user_email}, #{authKey})
	</insert>
	
	<update id="userAuth">
		<![CDATA[
			update mm_user 
			set userCertification = 1 
			where (select count(*) 
					from userAuth 
					where user_email = #{user_email}) > 0
		]]>
	</update>
	
	<insert id="myhome" parameterType="int">
		insert into mm_myhome(user_num, myhome_num)
		values(#{user_num}, #{user_num})
	</insert>
	
</mapper>


